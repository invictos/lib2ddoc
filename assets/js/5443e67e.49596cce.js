"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7768],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return m}});var r=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=r.createContext({}),l=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=l(e.components);return r.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),d=l(t),m=i,f=d["".concat(s,".").concat(m)]||d[m]||u[m]||a;return t?r.createElement(f,o(o({ref:n},p),{},{components:t})):r.createElement(f,o({ref:n},p))}));function m(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=t.length,o=new Array(a);o[0]=d;var c={};for(var s in n)hasOwnProperty.call(n,s)&&(c[s]=n[s]);c.originalType=e,c.mdxType="string"==typeof e?e:i,o[1]=c;for(var l=2;l<a;l++)o[l]=t[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},5036:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return c},contentTitle:function(){return s},metadata:function(){return l},toc:function(){return p},default:function(){return d}});var r=t(7462),i=t(3366),a=(t(7294),t(3905)),o=["components"],c={},s="\ud83c\udfe3 ANTS -> JSON",l={unversionedId:"Implementation/Specifications/GDoc+GDoc->JSON",id:"Implementation/Specifications/GDoc+GDoc->JSON",isDocsHomePage:!1,title:"\ud83c\udfe3 ANTS -> JSON",description:"\ud83d\udcdd Principe",source:"@site/docs/Implementation/Specifications/GDoc+GDoc->JSON.md",sourceDirName:"Implementation/Specifications",slug:"/Implementation/Specifications/GDoc+GDoc->JSON",permalink:"/lib2ddoc/docs/Implementation/Specifications/GDoc+GDoc->JSON",editUrl:"https://gitlab.insa-rouen.fr/acamusat/lib2ddoc/-/edit/SiteWeb/website/docs/Implementation/Specifications/GDoc+GDoc->JSON.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"\ud83d\udcda Types de documents",permalink:"/lib2ddoc/docs/Specifications/Types_de_documents"},next:{title:"\ud83c\udfea SpecificationStore",permalink:"/lib2ddoc/docs/Implementation/Specifications/SpecificationStore"}},p=[{value:"\ud83d\udcdd Principe",id:"-principe",children:[],level:2},{value:"\ud83d\udee0 Exemple pour la section S6:",id:"-exemple-pour-la-section-s6",children:[],level:2},{value:"Structure des fichiers de specs",id:"structure-des-fichiers-de-specs",children:[],level:2}],u={toc:p};function d(e){var n=e.components,t=(0,i.Z)(e,o);return(0,a.kt)("wrapper",(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"-ants---json"},"\ud83c\udfe3 ANTS -> JSON"),(0,a.kt)("h2",{id:"-principe"},"\ud83d\udcdd Principe"),(0,a.kt)("p",null,"Pour pouvoir d\xe9coder des 2DDOC, nous avons besoin de certaines informations du fichier de sp\xe9cification de l'ANTS:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Section 6 : Types de documents"),(0,a.kt)("li",{parentName:"ul"},"Section 7 : Identifiants (ID)"),(0,a.kt)("li",{parentName:"ul"},"Section 8 : ID dans chaque type de documents")),(0,a.kt)("p",null,"Ces informations permettent notamment de v\xe9rifier la validit\xe9 d'un ID (taille, valeur ...), ou encore les DI obligatoires pour chaque document. "),(0,a.kt)("p",null,"Nous avons d'abord rassembl\xe9 ces donn\xe9es dans un tableur (depuis le fichier PDF). "),(0,a.kt)("p",null,"Ensuite, nous avons d\xe9velopp\xe9 un script permettant de rassembler ces donn\xe9es dans un fichier JSON propre \xe0 chaque section."),(0,a.kt)("h2",{id:"-exemple-pour-la-section-s6"},"\ud83d\udee0 Exemple pour la section S6:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"function subarray_push(array, i, j, value) {\n  let al = array.length;\n  for(var k=0;k<(i-al+1);k++){\n    array.push([]);\n  }\n\n  al = array[i].length;\n  for(var k=0;k<(j-al+1);k++){\n    array[i].push([]);\n  }\n\n  array[i][j].push(value);\n}\n\nfunction s6() {\n  var ss = SpreadsheetApp.getActiveSpreadsheet();\n  var sheet = ss.getSheetByName(\"Section 6\");\n  var range = sheet.getDataRange();\n  var values = range.getValues();\n\n  var data = {};\n  values.forEach((row, i) => {\n\n    if(row[0] == '')\n      return;\n    \n    data[row[1]] = {\n      'type': row[0],\n      'date_emission': row[2] == 'O' ? true : false,\n      'description': row[3]\n    };\n  })\n  sheet.appendRow(['', 'JSON: ', JSON.stringify(data)]);\n}\n")),(0,a.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"Le script complet ainsi que le tableur sont disponible en Annexe."))),(0,a.kt)("h2",{id:"structure-des-fichiers-de-specs"},"Structure des fichiers de specs"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'Section6.json\n[\n    {\n        "type": "Justificatif de domicile",\n        "code": "00",\n        "date_emission": true,\n        "description": "Document \xe9mis sp\xe9cifiquement pour servir de justificatif de domicile."\n    }\n]\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'Section7.json\n[\n    {\n        "id": "01",\n        "nom": "Identifiant unique du document.",\n        "taille_min": 0,\n        "taille_max": -1,\n        "type": "Alphanum\xe9rique",\n        "description": "Cet identifiant permet en fonction de l\u2019\xe9metteur (si celui-ci fournit le service) de r\xe9cup\xe9rer le document correspondant. Cette donn\xe9e est encod\xe9e en utilisant uniquement des lettres majuscules non accentu\xe9es [A-Z] et des chiffres [0-9].",\n        "conditions": "MAJ+CHIFFRES"\n    }\n]\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'Section8.json\n{\n    "<S6>": {\n        "obligatoire": ["<S7>", "20","21","22","23","24","25","26"],\n        "facultatif": ["<S7>", "1K","1J","1I","1G"],\n        "conditions": [\n            [ //A OU B\n              ["<S7>", "DK ", "DL"],\n              ["DM", "DN", "DO", "DP"]\n            ],\n            [ // C OU D\n              ["DQ", "DR","DS"],\n              ["DT"]\n            ]\n        ]\n    }\n}\n')))}d.isMDXComponent=!0}}]);