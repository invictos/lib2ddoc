"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8189],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return m}});var r=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=r.createContext({}),u=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=u(e.components);return r.createElement(l.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=u(t),m=i,f=d["".concat(l,".").concat(m)]||d[m]||p[m]||a;return t?r.createElement(f,o(o({ref:n},c),{},{components:t})):r.createElement(f,o({ref:n},c))}));function m(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=t.length,o=new Array(a);o[0]=d;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var u=2;u<a;u++)o[u]=t[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},1937:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return u},toc:function(){return c},default:function(){return d}});var r=t(7462),i=t(3366),a=(t(7294),t(3905)),o=["components"],s={},l="\ud83d\udcce Serialiser",u={unversionedId:"Modules_externes/serialiser",id:"Modules_externes/serialiser",isDocsHomePage:!1,title:"\ud83d\udcce Serialiser",description:'La s\xe9rialisation de document est impl\xe9ment\xe9e dans le module "serialize"',source:"@site/docs/Modules_externes/serialiser.md",sourceDirName:"Modules_externes",slug:"/Modules_externes/serialiser",permalink:"/lib2ddoc/docs/Modules_externes/serialiser",editUrl:"https://gitlab.insa-rouen.fr/acamusat/lib2ddoc/-/edit/SiteWeb/website/docs/Modules_externes/serialiser.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"\ud83e\uddf0 Utilisation de libDMTX en rust",permalink:"/lib2ddoc/docs/Modules_externes/libDMTX_rust"}},c=[{value:"\ud83d\udcdd Interface",id:"-interface",children:[],level:2},{value:"\ud83e\uddf0Impl\xe9mentation",id:"impl\xe9mentation",children:[],level:2}],p={toc:c};function d(e){var n=e.components,t=(0,i.Z)(e,o);return(0,a.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"-serialiser"},"\ud83d\udcce Serialiser"),(0,a.kt)("p",null,'La s\xe9rialisation de document est impl\xe9ment\xe9e dans le module "serialize"'),(0,a.kt)("h2",{id:"-interface"},"\ud83d\udcdd Interface"),(0,a.kt)("p",null,"On propose l'interface suivante pour s\xe9rialiser un Document ou une Erreur: "),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"pub fn serialize(doc: Result<Document, ErrorDocument>) -> String")),(0,a.kt)("p",null,"Chacun est libre d'impl\xe9menter le \"s\xe9rialiseur\" qu'il pr\xe9f\xe8re."),(0,a.kt)("h2",{id:"impl\xe9mentation"},"\ud83e\uddf0Impl\xe9mentation"),(0,a.kt)("p",null,"Nous avons impl\xe9ment\xe9 une serialisation vers JSON. En effet, ce format de donn\xe9es est compris par la plupart des plateformes et permet donc une grande interop\xe9rabilit\xe9"),(0,a.kt)("p",null,"Nous avons utilis\xe9 la crate rust serde, qui permet de s\xe9rialiser vers de nombreux formats."),(0,a.kt)("p",null,'On a une "vue" correspondant aux informations du Document que l\'on souhaite afficher'),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-rust"},"struct DocumentJSON<'a>{\n    is_ok: bool,\n    headers: HeadersJSON<'a>,\n    message: HashMap<&'a str, FieldJSON<'a>>,\n    is_signature_valid: bool,\n    annex: &'a str,\n    is_document_valid: bool\n}\n\n\nstruct FieldJSON<'a>{\n    name: &'a str,\n    value: &'a str,\n    is_valid: bool,\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    errors: Option<Vec<String>>\n}\n\nstruct HeadersJSON<'a>{\n    marqueur : &'a str,\n    version : u8,\n    identifiant_de_ac : &'a str,\n    identifiant_du_certificat : &'a str,\n    date_emission : &'a str,\n    date_signature: &'a str,\n    type_document: &'a str,\n    type_document_description: &'a str,\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    perimetre : Option<&'a str>,\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    pays_emetteur : Option<&'a str>,\n}\n\nstruct ErrorJSON<'a>{\n    is_ok: bool,\n    kind: String,\n    value: &'a str\n}\n")),(0,a.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"Des exemples de sortie sont disponible  ",(0,a.kt)("a",{parentName:"p",href:"/lib2ddoc/docs/project/Demo"},"ici")))))}d.isMDXComponent=!0}}]);